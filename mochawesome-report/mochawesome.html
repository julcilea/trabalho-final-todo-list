<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:16,&quot;tests&quot;:26,&quot;passes&quot;:12,&quot;pending&quot;:0,&quot;failures&quot;:14,&quot;start&quot;:&quot;2025-09-07T02:20:18.534Z&quot;,&quot;end&quot;:&quot;2025-09-07T02:20:19.127Z&quot;,&quot;duration&quot;:593,&quot;testsRegistered&quot;:26,&quot;passPercent&quot;:46.15384615384615,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;f2194ca4-97ad-4834-8c80-7e0a4ffcdd47&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;772de56d-bd68-42cc-9971-9d4b554c4311&quot;,&quot;title&quot;:&quot;Auth Controller&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/controller/authController.test.js&quot;,&quot;file&quot;:&quot;/test/rest/controller/authController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;Auth Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth Controller \&quot;after each\&quot; hook in \&quot;Auth Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cee14693-36c8-471d-bad7-43beb410a9a1&quot;,&quot;parentUUID&quot;:&quot;772de56d-bd68-42cc-9971-9d4b554c4311&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6cfe852b-eb18-4ff1-9e4d-25b8d908a412&quot;,&quot;title&quot;:&quot;POST /auth/register&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/controller/authController.test.js&quot;,&quot;file&quot;:&quot;/test/rest/controller/authController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should register a new user successfully&quot;,&quot;fullTitle&quot;:&quot;Auth Controller POST /auth/register should register a new user successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.stub(UserModel, &#x27;findByUsername&#x27;).returns(null);\nconst createUserStub = sinon.stub(UserModel, &#x27;createUser&#x27;).returns({ id: 1, email: &#x27;testuser&#x27; });\nconst res = await request(app)\n  .post(&#x27;/auth/register&#x27;)\n  .send({ email: &#x27;testuser&#x27;, password: &#x27;password123&#x27; });\nexpect(res.status).to.equal(201);\nexpect(res.body.message).to.equal(&#x27;Usuário cadastrado com sucesso&#x27;);\nexpect(createUserStub.calledOnce).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername&quot;,&quot;estack&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername\n    at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n    at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:436:39)\n    at Context.&lt;anonymous&gt; (test/rest/controller/authController.test.js:18:13)\n    at process.processImmediate (node:internal/timers:485:21)&quot;},&quot;uuid&quot;:&quot;7d58e0b2-0382-4fb7-aa51-215fee611e8b&quot;,&quot;parentUUID&quot;:&quot;6cfe852b-eb18-4ff1-9e4d-25b8d908a412&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if username already exists&quot;,&quot;fullTitle&quot;:&quot;Auth Controller POST /auth/register should return 400 if username already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.stub(UserModel, &#x27;findByUsername&#x27;).returns({ id: 1, email: &#x27;testuser&#x27; });\nconst res = await request(app)\n  .post(&#x27;/auth/register&#x27;)\n  .send({ email: &#x27;testuser&#x27;, password: &#x27;password123&#x27; });\nexpect(res.status).to.equal(400);\nexpect(res.body.message).to.equal(&#x27;O usuário já existe&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername&quot;,&quot;estack&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername\n    at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n    at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:436:39)\n    at Context.&lt;anonymous&gt; (test/rest/controller/authController.test.js:31:13)\n    at process.processImmediate (node:internal/timers:485:21)&quot;},&quot;uuid&quot;:&quot;2217ca86-02bf-4142-ae7d-b85770501278&quot;,&quot;parentUUID&quot;:&quot;6cfe852b-eb18-4ff1-9e4d-25b8d908a412&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if username or password are not provided&quot;,&quot;fullTitle&quot;:&quot;Auth Controller POST /auth/register should return 400 if username or password are not provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n  .post(&#x27;/auth/register&#x27;)\n  .send({ email: &#x27;testuser&#x27; });\nexpect(res.status).to.equal(400);\nexpect(res.body.message).to.equal(&#x27;Usuário e senha são obrigatórios&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Email e senha são obrigatórios&#x27; to equal &#x27;Usuário e senha são obrigatórios&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Email e senha são obrigatórios&#x27; to equal &#x27;Usuário e senha são obrigatórios&#x27;\n    at Context.&lt;anonymous&gt; (test/rest/controller/authController.test.js:47:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- Email e senha são obrigatórios\n+ Usuário e senha são obrigatórios\n&quot;},&quot;uuid&quot;:&quot;7b490ced-284d-4be5-8d22-aaf2cd676149&quot;,&quot;parentUUID&quot;:&quot;6cfe852b-eb18-4ff1-9e4d-25b8d908a412&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;7d58e0b2-0382-4fb7-aa51-215fee611e8b&quot;,&quot;2217ca86-02bf-4142-ae7d-b85770501278&quot;,&quot;7b490ced-284d-4be5-8d22-aaf2cd676149&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;8afedde8-7bfa-4635-a01f-b483edb6d5e4&quot;,&quot;title&quot;:&quot;POST /auth/login&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/controller/authController.test.js&quot;,&quot;file&quot;:&quot;/test/rest/controller/authController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login successfully and return a token&quot;,&quot;fullTitle&quot;:&quot;Auth Controller POST /auth/login should login successfully and return a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const hashedPassword = await bcrypt.hash(&#x27;password123&#x27;, 10);\nconst user = { id: 1, email: &#x27;testuser&#x27;, password: hashedPassword };\nsinon.stub(UserModel, &#x27;findByUsername&#x27;).returns(user);\nconst res = await request(app)\n  .post(&#x27;/auth/login&#x27;)\n  .send({ email: &#x27;testuser&#x27;, password: &#x27;password123&#x27; });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.have.property(&#x27;token&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername&quot;,&quot;estack&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername\n    at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n    at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:436:39)\n    at Context.&lt;anonymous&gt; (test/rest/controller/authController.test.js:56:13)&quot;},&quot;uuid&quot;:&quot;3bc8b2a3-a34a-443e-8986-7330d64f8344&quot;,&quot;parentUUID&quot;:&quot;8afedde8-7bfa-4635-a01f-b483edb6d5e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 for invalid credentials (user not found)&quot;,&quot;fullTitle&quot;:&quot;Auth Controller POST /auth/login should return 401 for invalid credentials (user not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.stub(UserModel, &#x27;findByUsername&#x27;).returns(null);\nconst res = await request(app)\n  .post(&#x27;/auth/login&#x27;)\n  .send({ email: &#x27;wronguser&#x27;, password: &#x27;password123&#x27; });\nexpect(res.status).to.equal(401);\nexpect(res.body.message).to.equal(&#x27;Credenciais inválidas&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername&quot;,&quot;estack&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername\n    at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n    at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:436:39)\n    at Context.&lt;anonymous&gt; (test/rest/controller/authController.test.js:67:13)\n    at process.processImmediate (node:internal/timers:485:21)&quot;},&quot;uuid&quot;:&quot;fa0234d8-5a88-4d8d-bc18-2f4985531191&quot;,&quot;parentUUID&quot;:&quot;8afedde8-7bfa-4635-a01f-b483edb6d5e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 for invalid credentials (wrong password)&quot;,&quot;fullTitle&quot;:&quot;Auth Controller POST /auth/login should return 401 for invalid credentials (wrong password)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const hashedPassword = await bcrypt.hash(&#x27;password123&#x27;, 10);\nconst user = { id: 1, email: &#x27;testuser&#x27;, password: hashedPassword };\nsinon.stub(UserModel, &#x27;findByUsername&#x27;).returns(user);\nconst res = await request(app)\n  .post(&#x27;/auth/login&#x27;)\n  .send({ email: &#x27;testuser&#x27;, password: &#x27;wrongpassword&#x27; });\nexpect(res.status).to.equal(401);\nexpect(res.body.message).to.equal(&#x27;Credenciais inválidas&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername&quot;,&quot;estack&quot;:&quot;TypeError: Cannot stub non-existent property findByUsername\n    at Function.stub (node_modules/sinon/lib/sinon/stub.js:82:15)\n    at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:436:39)\n    at Context.&lt;anonymous&gt; (test/rest/controller/authController.test.js:81:13)&quot;},&quot;uuid&quot;:&quot;01feaefd-7aa6-4d46-ab3a-3a3ccdc7990d&quot;,&quot;parentUUID&quot;:&quot;8afedde8-7bfa-4635-a01f-b483edb6d5e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;3bc8b2a3-a34a-443e-8986-7330d64f8344&quot;,&quot;fa0234d8-5a88-4d8d-bc18-2f4985531191&quot;,&quot;01feaefd-7aa6-4d46-ab3a-3a3ccdc7990d&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:148,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;097148dd-cf6c-4943-b0e8-e8db0a3775b3&quot;,&quot;title&quot;:&quot;To-Do Controller&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/controller/todoController.test.js&quot;,&quot;file&quot;:&quot;/test/rest/controller/todoController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;To-Do Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;To-Do Controller \&quot;before each\&quot; hook in \&quot;To-Do Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Stub jwt.verify to simulate a logged-in user\nsinon.stub(jwt, &#x27;verify&#x27;).returns(fakeUser);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e0986e0-6cea-49bb-a6aa-adb7f27ec4d9&quot;,&quot;parentUUID&quot;:&quot;097148dd-cf6c-4943-b0e8-e8db0a3775b3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;To-Do Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;To-Do Controller \&quot;after each\&quot; hook in \&quot;To-Do Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44228a7c-1f9a-4e55-b6f4-a23316f503b2&quot;,&quot;parentUUID&quot;:&quot;097148dd-cf6c-4943-b0e8-e8db0a3775b3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8242c7c4-0786-4929-9bbf-b54e99c0503c&quot;,&quot;title&quot;:&quot;GET /todos&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/controller/todoController.test.js&quot;,&quot;file&quot;:&quot;/test/rest/controller/todoController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return only todos belonging to the authenticated user&quot;,&quot;fullTitle&quot;:&quot;To-Do Controller GET /todos should return only todos belonging to the authenticated user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const userTodos = [{ id: 1, userId: fakeUser.id, title: &#x27;User 1 Todo&#x27; }];\nsinon.stub(TodoModel, &#x27;findAllByUserId&#x27;).withArgs(fakeUser.id).returns(userTodos);\nconst res = await request(app)\n  .get(&#x27;/todos&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer fake-token&#x27;); // Token is needed to pass middleware header check\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;).with.lengthOf(1);\nexpect(res.body[0].title).to.equal(&#x27;User 1 Todo&#x27;);\nexpect(TodoModel.findAllByUserId.calledWith(fakeUser.id)).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 500 to equal 200&quot;,&quot;estack&quot;:&quot;AssertionError: expected 500 to equal 200\n    at Context.&lt;anonymous&gt; (test/rest/controller/todoController.test.js:32:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 200\n&quot;},&quot;uuid&quot;:&quot;d673debe-1483-4de3-9a3b-049efe6035fe&quot;,&quot;parentUUID&quot;:&quot;8242c7c4-0786-4929-9bbf-b54e99c0503c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;d673debe-1483-4de3-9a3b-049efe6035fe&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;8218f39c-9799-4ac8-ac24-378e8fea4a91&quot;,&quot;title&quot;:&quot;POST /todos&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/controller/todoController.test.js&quot;,&quot;file&quot;:&quot;/test/rest/controller/todoController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new todo for the authenticated user&quot;,&quot;fullTitle&quot;:&quot;To-Do Controller POST /todos should create a new todo for the authenticated user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newTodo = { title: &#x27;New Test Todo&#x27;, description: &#x27;A description&#x27; };\nconst createdTodo = { id: 10, userId: fakeUser.id, ...newTodo };\nsinon.stub(TodoModel, &#x27;create&#x27;).returns(createdTodo);\nconst res = await request(app)\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer fake-token&#x27;)\n  .send(newTodo);\nexpect(res.status).to.equal(201);\nexpect(res.body.title).to.equal(newTodo.title);\nexpect(res.body.userId).to.equal(fakeUser.id);\nexpect(TodoModel.create.calledWith(sinon.match({ userId: fakeUser.id, title: newTodo.title }))).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d396f4da-2b02-4f88-8dce-b18b474f4d92&quot;,&quot;parentUUID&quot;:&quot;8218f39c-9799-4ac8-ac24-378e8fea4a91&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if title is missing&quot;,&quot;fullTitle&quot;:&quot;To-Do Controller POST /todos should return 400 if title is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer fake-token&#x27;)\n  .send({ description: &#x27;A description&#x27; });\nexpect(res.status).to.equal(400);\nexpect(res.body.message).to.equal(&#x27;Titulo é obrigatório&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dded10a2-0f2a-4dfd-af73-fc7f13df7ee8&quot;,&quot;parentUUID&quot;:&quot;8218f39c-9799-4ac8-ac24-378e8fea4a91&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d396f4da-2b02-4f88-8dce-b18b474f4d92&quot;,&quot;dded10a2-0f2a-4dfd-af73-fc7f13df7ee8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;d60f4053-3bf2-4ac9-9a8a-dae984adbef4&quot;,&quot;title&quot;:&quot;PUT /todos/:id&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/controller/todoController.test.js&quot;,&quot;file&quot;:&quot;/test/rest/controller/todoController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a todo successfully&quot;,&quot;fullTitle&quot;:&quot;To-Do Controller PUT /todos/:id should update a todo successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const todoId = 1;\nconst updatedData = { title: &#x27;Updated Title&#x27;, completed: true };\nsinon.stub(TodoModel, &#x27;findIndexByIdAndUserId&#x27;).withArgs(todoId, fakeUser.id).returns(0); // Found at index 0\nsinon.stub(TodoModel, &#x27;update&#x27;).returns({ id: todoId, userId: fakeUser.id, ...updatedData });\nconst res = await request(app)\n  .put(`/todos/${todoId}`)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer fake-token&#x27;)\n  .send(updatedData);\nexpect(res.status).to.equal(200);\nexpect(res.body.title).to.equal(updatedData.title);\nexpect(res.body.completed).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 500 to equal 200&quot;,&quot;estack&quot;:&quot;AssertionError: expected 500 to equal 200\n    at Context.&lt;anonymous&gt; (test/rest/controller/todoController.test.js:81:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 200\n&quot;},&quot;uuid&quot;:&quot;791ef440-2d6c-41db-8bef-363af8dd023e&quot;,&quot;parentUUID&quot;:&quot;d60f4053-3bf2-4ac9-9a8a-dae984adbef4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if todo not found or does not belong to user&quot;,&quot;fullTitle&quot;:&quot;To-Do Controller PUT /todos/:id should return 404 if todo not found or does not belong to user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const todoId = 99;\nsinon.stub(TodoModel, &#x27;findIndexByIdAndUserId&#x27;).withArgs(todoId, fakeUser.id).returns(-1); // Not found\nconst res = await request(app)\n  .put(`/todos/${todoId}`)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer fake-token&#x27;)\n  .send({ title: &#x27;Does not matter&#x27; });\nexpect(res.status).to.equal(404);\nexpect(res.body.message).to.equal(&#x27;Tarefa não encontrada&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 500 to equal 404&quot;,&quot;estack&quot;:&quot;AssertionError: expected 500 to equal 404\n    at Context.&lt;anonymous&gt; (test/rest/controller/todoController.test.js:95:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 404\n&quot;},&quot;uuid&quot;:&quot;7f0d40c3-6651-4fe6-bfbb-7915af9a4198&quot;,&quot;parentUUID&quot;:&quot;d60f4053-3bf2-4ac9-9a8a-dae984adbef4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;791ef440-2d6c-41db-8bef-363af8dd023e&quot;,&quot;7f0d40c3-6651-4fe6-bfbb-7915af9a4198&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;a82a5dc1-e21d-4f08-8248-200cf1a69303&quot;,&quot;title&quot;:&quot;DELETE /todos/:id&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/controller/todoController.test.js&quot;,&quot;file&quot;:&quot;/test/rest/controller/todoController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a todo successfully&quot;,&quot;fullTitle&quot;:&quot;To-Do Controller DELETE /todos/:id should delete a todo successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const todoId = 1;\nsinon.stub(TodoModel, &#x27;findIndexByIdAndUserId&#x27;).withArgs(todoId, fakeUser.id).returns(0); // Found\nconst removeStub = sinon.stub(TodoModel, &#x27;remove&#x27;);\nconst res = await request(app)\n  .delete(`/api/todos/${todoId}`)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer fake-token&#x27;);\nexpect(res.status).to.equal(204);\nexpect(removeStub.calledOnce).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 404 to equal 204&quot;,&quot;estack&quot;:&quot;AssertionError: expected 404 to equal 204\n    at Context.&lt;anonymous&gt; (test/rest/controller/todoController.test.js:110:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- 404\n+ 204\n&quot;},&quot;uuid&quot;:&quot;56fd4d82-fe9a-4083-8e8e-3f0c6bd7fdc9&quot;,&quot;parentUUID&quot;:&quot;a82a5dc1-e21d-4f08-8248-200cf1a69303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if todo to delete is not found&quot;,&quot;fullTitle&quot;:&quot;To-Do Controller DELETE /todos/:id should return 404 if todo to delete is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const todoId = 99;\nsinon.stub(TodoModel, &#x27;findIndexByIdAndUserId&#x27;).withArgs(todoId, fakeUser.id).returns(-1); // Not found\nconst res = await request(app)\n  .delete(`/todos/${todoId}`)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer fake-token&#x27;);\nexpect(res.status).to.equal(404);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 500 to equal 404&quot;,&quot;estack&quot;:&quot;AssertionError: expected 500 to equal 404\n    at Context.&lt;anonymous&gt; (test/rest/controller/todoController.test.js:122:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 404\n&quot;},&quot;uuid&quot;:&quot;c356747a-14c5-4013-b0aa-9632ecd03a2c&quot;,&quot;parentUUID&quot;:&quot;a82a5dc1-e21d-4f08-8248-200cf1a69303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;56fd4d82-fe9a-4083-8e8e-3f0c6bd7fdc9&quot;,&quot;c356747a-14c5-4013-b0aa-9632ecd03a2c&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;f7d92190-b3cc-4420-abfb-216aa0e7e5b9&quot;,&quot;title&quot;:&quot;Auth API&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/external/auth.test.js&quot;,&quot;file&quot;:&quot;/test/rest/external/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ae5c0be1-d2b6-4bde-841b-6127fcc11e80&quot;,&quot;title&quot;:&quot;POST /auth/register&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/external/auth.test.js&quot;,&quot;file&quot;:&quot;/test/rest/external/auth.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;POST /auth/register\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API POST /auth/register \&quot;before each\&quot; hook in \&quot;POST /auth/register\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;User.clear();\nTodo.clear();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af830648-9fc5-46fd-8ee9-5316780a20e1&quot;,&quot;parentUUID&quot;:&quot;ae5c0be1-d2b6-4bde-841b-6127fcc11e80&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should register a new user successfully&quot;,&quot;fullTitle&quot;:&quot;Auth API POST /auth/register should register a new user successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .post(&#x27;/auth/register&#x27;)\n  .send({ email: \&quot;teste@teste.com\&quot;, password: \&quot;123456\&quot; });\nexpect(res.status).to.equal(201);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 409 to equal 201&quot;,&quot;estack&quot;:&quot;AssertionError: expected 409 to equal 201\n    at Context.&lt;anonymous&gt; (test/rest/external/auth.test.js:25:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- 409\n+ 201\n&quot;},&quot;uuid&quot;:&quot;95dabd4a-68be-4d1d-903d-cc7118818323&quot;,&quot;parentUUID&quot;:&quot;ae5c0be1-d2b6-4bde-841b-6127fcc11e80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 409 if email already exists&quot;,&quot;fullTitle&quot;:&quot;Auth API POST /auth/register should return 409 if email already exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await api\n  .post(&#x27;/auth/register&#x27;)\n  .send({ email: &#x27;teste@teste.com&#x27;, password: &#x27;123456&#x27; });\nconst res = await api\n  .post(&#x27;/auth/register&#x27;)\n  .send({ email: &#x27;teste@teste.com&#x27;, password: &#x27;123456&#x27; });\nexpect(res.status).to.equal(409);\n//expect(res.body.message).to.equal(&#x27;O usuário já existe&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d1ee81f-5462-406e-898b-a9b70288aad3&quot;,&quot;parentUUID&quot;:&quot;ae5c0be1-d2b6-4bde-841b-6127fcc11e80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if email or password are not provided&quot;,&quot;fullTitle&quot;:&quot;Auth API POST /auth/register should return 400 if email or password are not provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .post(&#x27;/auth/register&#x27;)\n  .send({ email: &#x27;teste@teste.com&#x27; });\nexpect(res.status).to.equal(400);\n//expect(res.body.message).to.equal(&#x27;Email e senha são obrigatórios&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30b04575-f9b2-4277-b5f5-cec67b59efd5&quot;,&quot;parentUUID&quot;:&quot;ae5c0be1-d2b6-4bde-841b-6127fcc11e80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d1ee81f-5462-406e-898b-a9b70288aad3&quot;,&quot;30b04575-f9b2-4277-b5f5-cec67b59efd5&quot;],&quot;failures&quot;:[&quot;95dabd4a-68be-4d1d-903d-cc7118818323&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;9314765c-d5e5-49dc-ba80-a375d378fe71&quot;,&quot;title&quot;:&quot;POST /auth/login&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/external/auth.test.js&quot;,&quot;file&quot;:&quot;/test/rest/external/auth.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;POST /auth/login\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API POST /auth/login \&quot;before all\&quot; hook in \&quot;POST /auth/login\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Create a user for login tests\nawait api.post(&#x27;/auth/register&#x27;).send({ email, password });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;642f32d5-fa3a-4d3b-b4c3-c014303523a1&quot;,&quot;parentUUID&quot;:&quot;9314765c-d5e5-49dc-ba80-a375d378fe71&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;POST /auth/login\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API POST /auth/login \&quot;before each\&quot; hook in \&quot;POST /auth/login\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;User.clear();\nTodo.clear();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84a2fa6a-7786-4a60-8ed5-c9c976544b88&quot;,&quot;parentUUID&quot;:&quot;9314765c-d5e5-49dc-ba80-a375d378fe71&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login successfully and return a token&quot;,&quot;fullTitle&quot;:&quot;Auth API POST /auth/login should login successfully and return a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:71,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .post(&#x27;/auth/login&#x27;)\n  .send({ email, password });\nexpect(res.status).to.equal(200);\nexpect(res.body).to.have.property(&#x27;token&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6019a195-d5eb-4a49-9ae8-5c2d614c37af&quot;,&quot;parentUUID&quot;:&quot;9314765c-d5e5-49dc-ba80-a375d378fe71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 for invalid credentials (user not found)&quot;,&quot;fullTitle&quot;:&quot;Auth API POST /auth/login should return 401 for invalid credentials (user not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .post(&#x27;/auth/login&#x27;)\n  .send({ email: &#x27;wrong@teste.com&#x27;, password: &#x27;123456&#x27; });\nexpect(res.status).to.equal(401);\n//expect(res.body.message).to.equal(&#x27;Credenciais inválidas&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f6f3745-d9ae-4b97-b36d-f9d61346f8c8&quot;,&quot;parentUUID&quot;:&quot;9314765c-d5e5-49dc-ba80-a375d378fe71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 for invalid credentials (wrong password)&quot;,&quot;fullTitle&quot;:&quot;Auth API POST /auth/login should return 401 for invalid credentials (wrong password)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .post(&#x27;/auth/login&#x27;)\n  .send({ email, password: &#x27;wrongpassword&#x27; });\nexpect(res.status).to.equal(401);\n//expect(res.body.message).to.equal(&#x27;Credenciais inválidas&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc0ca520-5273-4d42-a0e9-839e265cb1a2&quot;,&quot;parentUUID&quot;:&quot;9314765c-d5e5-49dc-ba80-a375d378fe71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6019a195-d5eb-4a49-9ae8-5c2d614c37af&quot;,&quot;4f6f3745-d9ae-4b97-b36d-f9d61346f8c8&quot;,&quot;bc0ca520-5273-4d42-a0e9-839e265cb1a2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:142,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;e7b495de-0a6a-4416-aa63-983a81cf9a6d&quot;,&quot;title&quot;:&quot;To-Do API&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/external/todo.test.js&quot;,&quot;file&quot;:&quot;/test/rest/external/todo.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;To-Do API\&quot;&quot;,&quot;fullTitle&quot;:&quot;To-Do API \&quot;before all\&quot; hook in \&quot;To-Do API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:140,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await api.post(&#x27;/auth/register&#x27;).send({ email, password });\nconst res = await api.post(&#x27;/auth/login&#x27;).send({ email, password });\ntoken = res.body.token;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;620fbf04-8c00-4c77-b9aa-8647a0fa1e87&quot;,&quot;parentUUID&quot;:&quot;e7b495de-0a6a-4416-aa63-983a81cf9a6d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;482c1bea-7a9d-4f1f-9998-c8d93784446e&quot;,&quot;title&quot;:&quot;GET /todos&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/external/todo.test.js&quot;,&quot;file&quot;:&quot;/test/rest/external/todo.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;GET /todos\&quot;&quot;,&quot;fullTitle&quot;:&quot;To-Do API GET /todos \&quot;before each\&quot; hook in \&quot;GET /todos\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;User.clear();\nTodo.clear();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0b8c2f8-8f5e-4165-893e-df098af94720&quot;,&quot;parentUUID&quot;:&quot;482c1bea-7a9d-4f1f-9998-c8d93784446e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return an array of todos for the authenticated user&quot;,&quot;fullTitle&quot;:&quot;To-Do API GET /todos should return an array of todos for the authenticated user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await api\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({ title: &#x27;Test Todo for GET&#x27;, description: &#x27;A description&#x27; });\nconst res = await api\n  .get(&#x27;/todos&#x27;)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`);\nexpect(res.status).to.equal(200);\nexpect(res.body).to.be.an(&#x27;array&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1993c18-0f32-49bf-bba8-0235035aa8c7&quot;,&quot;parentUUID&quot;:&quot;482c1bea-7a9d-4f1f-9998-c8d93784446e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a1993c18-0f32-49bf-bba8-0235035aa8c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;f1433a09-5d30-460c-b041-371132f88028&quot;,&quot;title&quot;:&quot;POST /todos&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/external/todo.test.js&quot;,&quot;file&quot;:&quot;/test/rest/external/todo.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;POST /todos\&quot;&quot;,&quot;fullTitle&quot;:&quot;To-Do API POST /todos \&quot;before each\&quot; hook in \&quot;POST /todos\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;User.clear();\nTodo.clear();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ae35a08-ee58-481b-a8d1-8382d3eca44c&quot;,&quot;parentUUID&quot;:&quot;f1433a09-5d30-460c-b041-371132f88028&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new todo&quot;,&quot;fullTitle&quot;:&quot;To-Do API POST /todos should create a new todo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newTodo = { title: &#x27;New API Test Todo&#x27;, description: &#x27;A description&#x27; };\nconst res = await api\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(newTodo);\nexpect(res.status).to.equal(201);\nexpect(res.body.title).to.equal(newTodo.title);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1566f718-819e-44c9-8910-e73ef8074280&quot;,&quot;parentUUID&quot;:&quot;f1433a09-5d30-460c-b041-371132f88028&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if title is missing&quot;,&quot;fullTitle&quot;:&quot;To-Do API POST /todos should return 400 if title is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({ description: &#x27;A description&#x27; });\nexpect(res.status).to.equal(400);\nexpect(res.body.message).to.equal(&#x27;Titulo é obrigatório&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected undefined to equal &#x27;Titulo é obrigatório&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected undefined to equal &#x27;Titulo é obrigatório&#x27;\n    at Context.&lt;anonymous&gt; (test/rest/external/todo.test.js:71:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;},&quot;uuid&quot;:&quot;382431a5-7b0f-446c-98af-d86a63492e5f&quot;,&quot;parentUUID&quot;:&quot;f1433a09-5d30-460c-b041-371132f88028&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1566f718-819e-44c9-8910-e73ef8074280&quot;],&quot;failures&quot;:[&quot;382431a5-7b0f-446c-98af-d86a63492e5f&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;062cef61-4e9c-4c83-9fe6-3c0914f0ae2b&quot;,&quot;title&quot;:&quot;PUT /todos/:id&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/external/todo.test.js&quot;,&quot;file&quot;:&quot;/test/rest/external/todo.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;PUT /todos/:id\&quot;&quot;,&quot;fullTitle&quot;:&quot;To-Do API PUT /todos/:id \&quot;before all\&quot; hook in \&quot;PUT /todos/:id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({ title: &#x27;Todo to be updated&#x27;, description: &#x27;...&#x27; });\ntodoId = res.body.id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ab5ae73-3c4c-4734-9b9d-ed0dc3a5d771&quot;,&quot;parentUUID&quot;:&quot;062cef61-4e9c-4c83-9fe6-3c0914f0ae2b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;PUT /todos/:id\&quot;&quot;,&quot;fullTitle&quot;:&quot;To-Do API PUT /todos/:id \&quot;before each\&quot; hook in \&quot;PUT /todos/:id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;User.clear();\nTodo.clear();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c23c9535-238d-4917-8826-cf8c15dbb4b3&quot;,&quot;parentUUID&quot;:&quot;062cef61-4e9c-4c83-9fe6-3c0914f0ae2b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a todo successfully&quot;,&quot;fullTitle&quot;:&quot;To-Do API PUT /todos/:id should update a todo successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedData = { title: &#x27;Updated Title&#x27;, completed: true };\nconst res = await api\n  .put(`/todos/${todoId}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send(updatedData);\nexpect(res.status).to.equal(200);\nexpect(res.body.title).to.equal(updatedData.title);\nexpect(res.body.completed).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 404 to equal 200&quot;,&quot;estack&quot;:&quot;AssertionError: expected 404 to equal 200\n    at Context.&lt;anonymous&gt; (test/rest/external/todo.test.js:99:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- 404\n+ 200\n&quot;},&quot;uuid&quot;:&quot;09f74e87-bbb5-4b86-9fea-dd336c9ab975&quot;,&quot;parentUUID&quot;:&quot;062cef61-4e9c-4c83-9fe6-3c0914f0ae2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if todo not found&quot;,&quot;fullTitle&quot;:&quot;To-Do API PUT /todos/:id should return 404 if todo not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .put(`/todos/9999`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({ title: &#x27;Does not matter&#x27; });\nexpect(res.status).to.equal(404);\n//expect(res.body.message).to.equal(&#x27;Tarefa não encontrada&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a43162d9-1600-44ec-8216-faf6b50a421b&quot;,&quot;parentUUID&quot;:&quot;062cef61-4e9c-4c83-9fe6-3c0914f0ae2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a43162d9-1600-44ec-8216-faf6b50a421b&quot;],&quot;failures&quot;:[&quot;09f74e87-bbb5-4b86-9fea-dd336c9ab975&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;085090b2-6c3e-45b4-b645-226382eef4d8&quot;,&quot;title&quot;:&quot;DELETE /todos/:id&quot;,&quot;fullFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/test/rest/external/todo.test.js&quot;,&quot;file&quot;:&quot;/test/rest/external/todo.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;DELETE /todos/:id\&quot;&quot;,&quot;fullTitle&quot;:&quot;To-Do API DELETE /todos/:id \&quot;before all\&quot; hook in \&quot;DELETE /todos/:id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({ title: &#x27;Todo to be deleted&#x27;, description: &#x27;...&#x27; });\ntodoId = res.body.id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d5bd5fa-bb5a-485e-a6bb-4035dc672293&quot;,&quot;parentUUID&quot;:&quot;085090b2-6c3e-45b4-b645-226382eef4d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;DELETE /todos/:id\&quot;&quot;,&quot;fullTitle&quot;:&quot;To-Do API DELETE /todos/:id \&quot;before each\&quot; hook in \&quot;DELETE /todos/:id\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;User.clear();\nTodo.clear();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83033ee9-8226-4b4a-8832-6924b6e8b766&quot;,&quot;parentUUID&quot;:&quot;085090b2-6c3e-45b4-b645-226382eef4d8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a todo successfully&quot;,&quot;fullTitle&quot;:&quot;To-Do API DELETE /todos/:id should delete a todo successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .delete(`/todos/${todoId}`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`);\nexpect(res.status).to.equal(204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;885e0168-f8fd-4ad3-8aef-cf846fd6fdcd&quot;,&quot;parentUUID&quot;:&quot;085090b2-6c3e-45b4-b645-226382eef4d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if todo not found&quot;,&quot;fullTitle&quot;:&quot;To-Do API DELETE /todos/:id should return 404 if todo not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await api\n  .delete(`/todos/9999`)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`);\nexpect(res.status).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d15ceefd-a7b9-408b-b837-05b2e1bde770&quot;,&quot;parentUUID&quot;:&quot;085090b2-6c3e-45b4-b645-226382eef4d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;885e0168-f8fd-4ad3-8aef-cf846fd6fdcd&quot;,&quot;d15ceefd-a7b9-408b-b837-05b2e1bde770&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.7.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;trabalho-final-todo-list&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/julcilea/Documentos/PGATS/trabalho-final-todo-list/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>